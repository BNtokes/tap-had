<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TapSwap</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #1c1e21;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .main-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .bottom-bar {
            display: flex;
            justify-content: space-around;
            background-color: #fff;
            border-top: 1px solid #ddd;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .nav-btn {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .nav-btn.active {
            background-color: #e7f3ff;
            color: #1877f2;
        }

        #tap-section {
            text-align: center;
        }

        #cat {
            width: 200px;
            height: 200px;
            cursor: pointer;
            user-select: none;
        }

        #energy-bar-container {
            width: 80%;
            margin: 20px auto;
            background-color: #ddd;
            border-radius: 10px;
            height: 20px;
        }

        #energy-bar {
            height: 100%;
            width: 100%;
            background-color: #4caf50;
            border-radius: 10px;
            transition: width 0.1s linear;
        }
        
        #points-display {
            font-size: 24px;
            font-weight: bold;
        }

        .profile-info p {
            font-size: 18px;
        }

        .task-list .task {
            background-color: #fff;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }

        .task-list .task button {
            background-color: #1877f2;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            float: right;
        }

        .withdraw-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .withdraw-method {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
        
        .withdraw-method input {
            width: calc(100% - 22px);
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .withdraw-method button {
             background-color: #4caf50;
             color: white;
             border: none;
             padding: 10px 20px;
             border-radius: 5px;
             cursor: pointer;
             margin-top: 10px;
             width: 100%;
        }

    </style>
</head>
<body>

    <div class="main-content">
        <!-- Profile Section -->
        <div id="profile-section" class="page">
            <h2>Profile</h2>
            <div class="profile-info">
                <p><strong>Name:</strong> <span id="user-name"></span></p>
                <p><strong>Joining Date:</strong> <span id="joining-date"></span></p>
                <p><strong>Referral Link:</strong> <span id="referral-link"></span></p>
                <p><strong>Points:</strong> <span id="profile-points"></span></p>
            </div>
        </div>

        <!-- Tap Section -->
        <div id="tap-section" class="page active">
            <h2>Tap the Cat!</h2>
            <img src="https://i.imgur.com/gQf2Jd2.png" alt="Cat" id="cat">
            <p id="points-display">0</p>
            <div id="energy-bar-container">
                <div id="energy-bar"></div>
            </div>
            <p>Energy: <span id="energy-level">100</span>/100</p>
        </div>

        <!-- Task Section -->
        <div id="task-section" class="page">
            <h2>Tasks</h2>
            <div class="task-list">
                <div class="task" id="task1">Watch Video 1 <button onclick="completeTask('task1', 1000)">Earn 1000</button></div>
                <div class="task" id="task2">Watch Video 2 <button onclick="completeTask('task2', 1000)">Earn 1000</button></div>
                <div class="task" id="task3">Watch Video 3 <button onclick="completeTask('task3', 1000)">Earn 1000</button></div>
                <div class="task" id="task4">Watch Video 4 <button onclick="completeTask('task4', 1000)">Earn 1000</button></div>
                <div class="task" id="task5">Watch Video 5 <button onclick="completeTask('task5', 1000)">Earn 1000</button></div>
            </div>
        </div>

        <!-- Withdraw Section -->
        <div id="withdraw-section" class="page">
            <h2>Withdraw Points</h2>
             <div class="withdraw-methods">
                <div class="withdraw-method">
                    <h3>PayPal</h3>
                    <input type="email" placeholder="PayPal Email">
                    <input type="number" placeholder="Points to Withdraw" id="paypal-points">
                    <button onclick="withdraw('paypal')">Withdraw</button>
                </div>
                <div class="withdraw-method">
                    <h3>Wired Transfer</h3>
                    <input type="text" placeholder="Account Holder Name">
                    <input type="text" placeholder="Account Number">
                    <input type="text" placeholder="Bank Name">
                    <input type="text" placeholder="SWIFT/BIC Code">
                    <input type="number" placeholder="Points to Withdraw" id="wired-points">
                    <button onclick="withdraw('wired')">Withdraw</button>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <button class="nav-btn active" onclick="showPage('tap-section')">Tap</button>
        <button class="nav-btn" onclick="showPage('profile-section')">Profile</button>
        <button class="nav-btn" onclick="showPage('task-section')">Task</button>
        <button class="nav-btn" onclick="showPage('withdraw-section')">Withdraw</button>
    </div>

    <script>
        const userData = {
            name: "Telegram User",
            joiningDate: new Date().toLocaleDateString(),
            points: 0,
            energy: 100,
            completedTasks: []
        };

        function loadUserData() {
            const savedData = localStorage.getItem('tapSwapUserData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(userData, parsedData);
            }
            updateUI();
        }
        
        function saveUserData() {
            localStorage.setItem('tapSwapUserData', JSON.stringify(userData));
        }

        function updateUI() {
            document.getElementById('user-name').textContent = userData.name;
            document.getElementById('joining-date').textContent = userData.joiningDate;
            document.getElementById('referral-link').textContent = `t.me/tapswap_bot?start=${userData.name.replace(/\s+/g, '')}`;
            document.getElementById('profile-points').textContent = userData.points;
            document.getElementById('points-display').textContent = userData.points;
            document.getElementById('energy-level').textContent = Math.round(userData.energy);
            document.getElementById('energy-bar').style.width = `${userData.energy}%`;
            
            userData.completedTasks.forEach(taskId => {
                const taskElement = document.getElementById(taskId);
                if(taskElement){
                    taskElement.querySelector('button').disabled = true;
                    taskElement.querySelector('button').textContent = 'Completed';
                }
            });
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.nav-btn[onclick="showPage('${pageId}')"]`).classList.add('active');
        }

        document.getElementById('cat').addEventListener('click', () => {
            if (userData.energy > 0) {
                userData.points++;
                userData.energy--;
                updateUI();
                saveUserData();
            }
        });

        setInterval(() => {
            if (userData.energy < 100) {
                userData.energy += 0.5; 
                if(userData.energy > 100) userData.energy = 100;
                updateUI();
                saveUserData();
            }
        }, 1000);

        function completeTask(taskId, points) {
            if (!userData.completedTasks.includes(taskId)) {
                userData.points += points;
                userData.completedTasks.push(taskId);
                updateUI();
                saveUserData();
                alert(`Task completed! You earned ${points} points.`);
            }
        }
        
        function withdraw(method) {
            let pointsToWithdraw = 0;
            if(method === 'paypal'){
                pointsToWithdraw = parseInt(document.getElementById('paypal-points').value);
            } else if (method === 'wired'){
                pointsToWithdraw = parseInt(document.getElementById('wired-points').value);
            }

            if(isNaN(pointsToWithdraw) || pointsToWithdraw <= 0){
                alert("Please enter a valid amount of points to withdraw.");
                return;
            }
            
            if (pointsToWithdraw > userData.points) {
                alert("You don't have enough points to withdraw.");
                return;
            }
            
            userData.points -= pointsToWithdraw;
            updateUI();
            saveUserData();
            alert(`Withdrawal of ${pointsToWithdraw} points via ${method} is being processed on localhost.`);
        }
        
        window.onload = loadUserData;

    </script>
</body>
</html>
